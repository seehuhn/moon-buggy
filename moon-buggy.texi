\input texinfo   @c -*-texinfo-*-
@c $Id: moon-buggy.texi,v 1.3 1999/07/21 12:43:44 voss Exp $
@c %**start of header
@setfilename moon-buggy.info
@settitle Moon-Buggy Usage and Maintenance
@include version.texi
@c %**end of header

@dircategory Games
@direntry
* moon-buggy: (moon-buggy).     Drive some car across the moon
@end direntry

@ifinfo
This file documents moon-buggy, a simple character graphics game

Copyright 1999 Jochen Vo@ss{}

Permission is granted to make and distribute verbatim copies of this
manual provided the copyright notice and this permission notice are
preserved on all copies.

@ignore
Permission is granted to process this file through TeX and print the
results, provided the printed document carries a copying permission
notice identical to this one except for the removal of this paragraph
(this paragraph not being relevant to the printed manual).

@end ignore
Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

Permission is granted to copy and distribute translations of this
manual into another language, under the above conditions for modified
versions, except that this permission notice may be stated in a
translation approved by the Free Software Foundation.
@end ifinfo

@setchapternewpage off
@titlepage
@title Moon-Buggy Usage and Maintenance
@sp 8
@center @image{title,,}
@author by Jochen Vo@ss{}

@page
@vskip 0pt plus 1filll
Copyright @copyright{} 1999 Jochen Vo@ss{}

Published by Jochen Vo@ss{}

Permission is granted to make and distribute verbatim copies of this
manual provided the copyright notice and this permission notice are
preserved on all copies.

Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided also that the
entire resulting derived work is distributed under the terms of a
permission notice identical to this one.

Permission is granted to copy and distribute translations of this manual
into another language, under the above conditions for modified versions,
except that this permission notice may be stated in a translation
approved by the Free Software Foundation.
@end titlepage
@headings double

@node Top, Introduction, (dir), (dir)

@ifinfo
Moon-buggy is a simple character graphics game, where you drive some
kind of car across the moon's surface.  Unfortunately there are
dangerous craters there.  Fortunately your car can jump over them!

This edition of the manual applies to version @value{VERSION} of the
program.
@end ifinfo

@menu
* Introduction::                Introduction
* Moon-buggy Invocation::       Moon-buggy Invocation
* Maint-buggy Invocation::      Maint-buggy Invocation
* Playing the Game::            Keyboard commands
* Shared Score Files::          Competition via the top-ten table
* Installation::                Installation and setup
* References::                  References
@end menu


@node Introduction, Moon-buggy Invocation, Top, Top
@chapter Introduction

Moon-buggy is a simple character graphics game, where you drive some
kind of car across the moon's surface.  Unfortunately there are
dangerous craters there.  Fortunately your car can jump over them!

The game is not yet finished.  So be prepared to encounter bugs (and
please report them).  But it works to some extent, it has a top-ten
list, and it may be fun.  Just try it!

Moon-Buggy comes with no warranty, to the extent permitted by law.  You
may redistribute copies of Moon-Buggy under the terms of the GNU General
Public License.  For more information about these matters, read the file
@file{COPYING} of the source code distribution or press @key{c} at
moon-buggy's title screen.

Please mail any suggestions and bug reports to
@email{voss@@mathematik.uni-kl.de}.  Your message should include the
moon-buggy version number, as obtained by the command @samp{moon-buggy -V}.


@node  Moon-buggy Invocation, Maint-buggy Invocation, Introduction, Top
@chapter Moon-buggy Invocation

Normal usage is to start @samp{moon-buggy} without any options.
Nevertheless there are some.  The long options (starting with @samp{--})
are only supported on some system types.

@table @samp
@item -h
@itemx --help
shows a short usage message.

@item -n
@itemx --no-title
skips the title screen.

@item -V
@itemx --version
prints the program's version to standard output and exits.
@end table


@node  Maint-buggy Invocation, Playing the Game, Moon-buggy Invocation, Top
@chapter Maint-buggy Invocation

The @samp{maint-buggy} script is installed as part of the moon-buggy
package.  It helps you to maintain your moon-buggy installation and is
only useful for the system administrator.

At the moment, its only purpose is to remove moon-buggy from your
system.

The script understands the following options.

@table @samp
@item --help
shows a short usage message.

@item --uninstall
removes the moon-buggy installation from the system.  Use with caution:
As this includes the @file{maint-buggy} script itself, this step cannot
easily be undone!

Note: If you installed moon-buggy with the help of a package manager
(like @code{rpm}) you probably should use the same program for
deinstallation.

@item --version
prints moon-buggy's version string to standard output and exits.
@end table


@node Playing the Game, Shared Score Files, Maint-buggy Invocation, Top
@chapter Playing the Game

Just start it and follow the instructions.  The car is controlled by a
couple of keys.  These are the following.

@table @key
@item SPC
makes your car jump.  The length of a jump is fixed and you can only
start a new jump while the wheels have contact to the ground.
@item a
fires the mining laser.  The laser is used to remove stones, which may
block your way.
@item q
quits the game prematurely.  But you still keep your score and may enter
the top ten list.
@end table

Moon-buggy can handle a wide range of screen sizes.  But it runs best,
if the screen has at least 80 columns.  If you run it on a screen with
significantly less columns it may look strange and could be hard to
play.


@node Shared Score Files, Installation, Playing the Game, Top
@chapter Shared Score Files

Moon-buggy has two concepts of score files: the @dfn{global score file}
is located somewhere in the installation directories and is shared
between all players.  The exact place in the file system can be
controlled via @code{configure}'s @samp{--sharedstatedir} option.  This
highscore file is used whenever Moon-buggy has the rights to access it.
Otherwise the @dfn{local score file} is used.  This file is located in
the user's home directory (the file name is @file{.mbscore}).  Thus, the
local score file is not shared between different accounts.

As the game is much more fun, when the players can compete for the
highest scores, the global score file should be writable by the
moon-buggy program.  But to achive this goal on a multi-user system is
somewhat tricky, because we have to use the operating system's access
controls properly.

One solution is to make the score file world writable, but this
obviously opens the opportunity to cheat.

The other possibility is to make moon-buggy a setgid program.  This
means the following: you choose a group ID, which cannot be used by
ordinary users, and allow only members of this group to write the score
file.  Many systems have a group @samp{games} for this purpose (Check
your @file{/etc/group} file).  Then you make this group own the
@file{moon-buggy} executable and set the file's setgid bit.  This bit
gives moon-buggy its file groups's access permissions in addition to the
player's and so moon-buggy may be able to access the score file.

You can use @code{configure}'s @samp{--with-setgid} option
(@pxref{Installation}) to set this up during installation.  Or you may
manually change the access permissions after installation as you like.
In the second case you can even use the setuid bit.  The moon-buggy
executable is prepared to use whatever permissions it has.


@node Installation, References, Shared Score Files, Top
@chapter Installation

Moon-buggy requires the curses library as a prerequisite.  If curses is
not installed on your system, you may use the free ncurses package
(@pxref{References}).

When you unpack the moon-buggy distribution, you get one directory,
which holds all the source files and the documentation.  Now enter this
directory:

@example
cd moon-buggy-@value{VERSION}
@end example

@noindent
If you have built moon-buggy in this directory before, you can use the
command @samp{make distclean} to remove any files, which were created
during the last build.

Generic installation instructions are in the file @file{INSTALL}.
There are some points of interest:

@itemize @bullet
@item
By default, the program will be installed as
@file{/usr/local/bin/moon-buggy}.  You can specify an installation
prefix other than @file{/usr/local} by giving @samp{configure} the
@samp{--prefix=@var{path}} option.

@item
You can choose the score file's location via @code{configure}'s
@samp{--sharedstatedir} option.  On Linux you should use

@example
--sharedstatedir=/var/games
@end example

@noindent
to comply with the Filesystem Hierarchy Standard (@pxref{References}).

@item
Moon-buggy supports shared score files.  For details, see @ref{Shared
Score Files}.  As explained there, you may want to make moon-buggy a
setgid program.  This can be done with the @samp{--with-setgid} option.
If you use

@example
--with-setgid=games
@end example

@noindent
then the installation process arranges everything for setgid usage.

@strong{Caution}: this introduces potential security risks.  I tried to
minimise these, but nevertheless be careful with this.  And remember:
moon-buggy comes with no warranty.
@end itemize

Example: On GNU/Linux systems you probably can use the following
commands.  For the last one you may need root user permissions.

@example
./configure --sharedstatedir=/var/games --with-setgid=games
make
make install
@end example

Once you do not want this program on your system any more, you can use
the @samp{maint-buggy} script to cleanly remove the package from your
system (@pxref{Maint-buggy Invocation}).


@node References,  , Installation, Top
@chapter References

This chapter gives some references to resources mentioned in this
manual.  As the internet changes incessantly, the addresses may be
outdated.  If you find this to happen, please report it as a bug.

Version 2.0 of the @strong{Filesystem Hierarchy Standard} (FHS 2.0) may
be found on the internet at
@url{ftp://sunsite.unc.edu/pub/linux/docs/fhs/fhs-2.0.tar.gz}.

The @strong{ncurses} package is at
@url{ftp://prep.ai.mit.edu/pub/gnu/ncurses-4.2.tar.gz}.
@bye
